@model LastLibrary.Models.DeckManagerViewModel.DeckModel
@{
    ViewBag.Title = "title";
    Layout = "_Layout";
}

<h2>DeckModel Manager</h2>
    <div class="col-md-12">
        <div class="container-left col-md-6">
            <h1-custom>Search</h1-custom>
            <div id="cardSearchForm">
                <form class="card-search">
                    <div class="form-group">
                        <label for="cardName" id="cardNameLabel">Card Name</label>
                        <input type="text" placeholder="card name" id="cardName" class="input-big">
                    </div>

                    <label id="colourLabel">Colours</label>
                    <div class="form-group">
                        <label class="checkbox-inline">
                            <input type="checkbox" value="black" id="colourBlack"> Black
                        </label>
                        <label class="checkbox-inline">
                            <input type="checkbox" value="white" id="colourWhite"> White
                        </label>
                        <label class="checkbox-inline">
                            <input type="checkbox" value="blue" id="colourBlue"> Blue
                        </label>
                        <label class="checkbox-inline">
                            <input type="checkbox" value="green" id="colourGreen"> Green
                        </label>
                        <label class="checkbox-inline">
                            <input type="checkbox" value="red" id="colourRed"> Red
                        </label>
                    </div>

                    <div class="form-group">
                        <label for="power" if="powerLabel">Power</label>
                        <input type="text" placeholder="2" id="power" class="small-input">
                    </div>

                    <div class="form-group">
                        <label for="toughness" id="toughnessLabel">Toughness</label>
                        <input type="text" placeholder="2" id="toughness" class="small-input">
                    </div>

                    <div class="form-group">
                        <label for="mana" id="manaLabel">Converted Mana Cost</label>
                        <input type="text" placeholder="2" id="mana" class="small-input">
                    </div>


                    <label id="raritylabel">Card Rarity</label>
                    <select id="rarity">
                        <option value="Any" selected>Any</option>
                        <option value="Common">Common</option>
                        <option value="Uncommon">Uncommon</option>
                        <option value="Rare">Rare</option>
                        <option value="Mythic Rare">Mythic Rare</option>
                    </select>


                    <div class="submitButton">
                        <button id="cardSearchButton" class="btn btn-default">Search</button>
                    </div>

                </form>
            </div>
            <h1-custom>Your Deck</h1-custom>
           

        </div>
        <div class="container-right col-md-">
            <h1-custom>Search Result</h1-custom>
            <div id="cardSearchResults"></div>

        </div>
    </div>

@section scripts{
    <script type="text/javascript">
    $(function() {
        $("#cardSearchButton")
            .click(function() {
                var cardName = $("#cardName").val();
                var black = $("#colourBlack").is(":checked");
                var white = $("#colourWhite").is(":checked");
                var blue = $("#colourBlue").is(":checked");
                var green = $("#colourGreen").is(":checked");
                var red = $("#colourRed").is(":checked");
                var power = $("#power").val();
                var toughness = $("#toughness").val();
                var mana = $("#mana").val();
                var rarity = $("#rarity").val();

                var dataJSON =
                    {
                        "isblue": blue,
                        "isRed": red,
                        "isGreen": green,
                        "iswhite": white,
                        "isblack": black,
                        "isColorless": false,
                        "Power": power,
                        "Toughness": toughness,
                        "Cmc": mana,
                        "CmcOperator": "",
                        "rarity": rarity
                    }
                alert(dataJSON);
                $.ajax({
                    type: "POST",
                    url: "api/card/" + cardName,
                    contentType: 'application/json',
                    data: JSON.stringify(dataJSON),
                    success: function () {
                        $('#cardSearchResults').html("div id='result'>Hello</div>");
                    }
                });
                return false;
            });
        });

        function displayReturnedCard(card) {
            if (card.name === null || card.name === undefined) return null;
            $('<p>',
                {
                    text: card.name
                })
                .appendTo("#cardSearchResults");
        }
    </script>
}


@*<div id="cardSearchResults"></div>*@
@**@
@*@section scripts{*@
@*    <script type="text/javascript">*@
@*        $('#cardSearchInput')*@
@*            .keypress(function(e) {*@
@*                if (e.which === 13) {*@
@*                    e.preventDefault();*@
@*                    requestCard();*@
@*                }*@
@*            });*@
@**@
@*        $('#cardSearchButton')*@
@*            .click(function(e) {*@
@*                e.preventDefault();*@
@*                requestCard();*@
@*            });*@
@**@
@*        //setup dropdown clicks*@
@*        $('#cmcList li a')*@
@*            .click(function() {*@
@*                $("#cmcText").text($(this).text());*@
@*            });*@
@*        $('#powerList li a')*@
@*            .click(function() {*@
@*                $("#powerText").text($(this).text());*@
@*            });*@
@*        $('#toughnessList li a')*@
@*            .click(function() {*@
@*                $("#toughnessText").text($(this).text());*@
@*            });*@
@*        $('#rarityList li a')*@
@*            .click(function() {*@
@*                $("#rarityText").text($(this).text());*@
@*            });*@
@**@
@*        function requestCard() {*@
@*            $("#cardSearchResults").empty();*@
@*            var inputText = $("#cardSearchInput").val();*@
@**@
@*            //get the advanced settings*@
@*            var cmcText = $("#cmcInput").val();*@
@*            var powerText = $("#powerInput").val();*@
@*            var toughnessText = $("#toughnessInput").val();*@
@*            var rarityText = $("#rarityText").text();*@
@**@
@*            //Card Colour settings*@
@*            var advancedSettings = {};*@
@*            if ($("#blackCheckbox").is(':checked')) {*@
@*                advancedSettings.isBlack = true;*@
@*            }*@
@*            if ($("#whiteCheckbox").is(':checked')) {*@
@*                advancedSettings.isWhite = true;*@
@*            }*@
@*            if ($("#redCheckbox").is(':checked')) {*@
@*                advancedSettings.isRed = true;*@
@*            }*@
@*            if ($("#blueCheckbox").is(':checked')) {*@
@*                advancedSettings.isBlue = true;*@
@*            }*@
@*            if ($("#greenCheckbox").is(':checked')) {*@
@*                advancedSettings.isGreen = true;*@
@*            }*@
@**@
@*            //Card Rarity*@
@*            if (rarityText !== "Any") {*@
@*                advancedSettings.rarity = rarityText;*@
@*            }*@
@**@
@*            //Cmc*@
@*            if (cmcText !== undefined && cmcText !== null && cmcText !== "") {*@
@*                advancedSettings.cmc = cmcText;*@
@**@
@*                var cmcOperator = $("#cmcText").text();*@
@*                if (cmcOperator !== "Equals") {*@
@*                    advancedSettings.cmcOperator = cmcOperator;*@
@*                }*@
@*            }*@
@**@
@*            //power*@
@*            if (powerText !== undefined && powerText !== null && powerText !== "") {*@
@*                advancedSettings.power = powerText;*@
@**@
@*                var powerOperator = $("#powerText").text();*@
@*                if (powerOperator !== "Equals") {*@
@*                    advancedSettings.powerOperator = powerOperator;*@
@*                }*@
@*            }*@
@**@
@*            //toughness*@
@*            if (toughnessText !== undefined && toughnessText !== null && toughnessText !== "") {*@
@*                advancedSettings.power = toughnessText;*@
@**@
@*                var toughnessOperator = $("#toughnessText").text();*@
@*                if (toughnessOperator !== "Equals") {*@
@*                    advancedSettings.powerOperator = toughnessOperator;*@
@*                }*@
@*            }*@
@**@
@*            //see which Ajax call to make*@
@*            if (Object.keys(advancedSettings).length === 0) {*@
@*                if (!$.trim(inputText).length) {*@
@*                    return false;*@
@*                }*@
@*                //basic GET request*@
@*                $.ajax("/api/card/" + encodeURIComponent(inputText),*@
@*                {*@
@*                    success: function(result) {*@
@*                        result.cards.forEach(function(card) {*@
@*                            displayReturnedCard(card);*@
@*                        });*@
@*                        return false;*@
@*                    },*@
@*                    error: function(result) {*@
@*                        console.error(result);*@
@*                        return false;*@
@*                    }*@
@*                });*@
@*            } else {*@
@*                var requestUrl = "/api/card/";*@
@*                if ($.trim(inputText).length) {*@
@*                    requestUrl = requestUrl + encodeURIComponent(inputText);*@
@*                }*@
@*                //POST request with advanced settings*@
@*                $.ajax({*@
@*                    type: "POST",*@
@*                    url: requestUrl,*@
@*                    contentType: 'application/json',*@
@*                    data: JSON.stringify(advancedSettings),*@
@*                    success: function(result) {*@
@*                        result.cards.forEach(function(card) {*@
@*                            displayReturnedCard(card);*@
@*                        });*@
@*                        return false;*@
@*                    },*@
@*                    error: function(result) {*@
@*                        console.error(result);*@
@*                        return false;*@
@*                    }*@
@*                });*@
@*                return false;*@
@*            }*@
@*        }*@
@**@
@*        function displayReturnedCard(card) {*@
@*            if (card.name === null || card.name === undefined) return null;*@
@*            $('<p>',*@
@*                {*@
@*                    text: card.name*@
@*                })*@
@*                .appendTo("#cardSearchResults");*@
@*        }*@
@*    </script>*@
@*}*@